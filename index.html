<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="keywords" content="Python, AI">
<meta property="og:type" content="website">
<meta property="og:title" content="Hub of Poppet">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hub of Poppet">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hub of Poppet">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Hub of Poppet</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hub of Poppet</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">每一个闻鸡起舞的日子都是我在追赶世界的脚步</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/基于Pycharm和Docker的本地开发环境代码加密/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="redpoppet">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hub of Poppet">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/12/基于Pycharm和Docker的本地开发环境代码加密/" itemprop="url">基于Pycharm和Docker的开发环境代码加密</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-12T16:31:42+08:00">
                2020-02-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Technical-Innovation/" itemprop="url" rel="index">
                    <span itemprop="name">Technical Innovation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何使用Pycharm和Docker实现开发环境自定义"><a href="#如何使用Pycharm和Docker实现开发环境自定义" class="headerlink" title="如何使用Pycharm和Docker实现开发环境自定义"></a>如何使用Pycharm和Docker实现开发环境自定义</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>在工作中经常存在这样一种状态，当同时开发多个项目的时候，如果每个项目的环境配置是不一样的，则当需要进行项目切换开发时，是比较痛苦的。</p>
<p>虽说存在各种环境隔离工具，但是仅仅是服务于一种语言的特定开发。项目开发中使用的环境还是蛮多的，有时候还是需要像独立机器那样的环境来进行项目隔离开发。为此以前采用虚拟机方式进行环境隔离。不过使用laptop进行开发，虚拟机解决方案还是不够轻量。</p>
<h2 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h2><p>其实业界已经成熟的方案来进行环境隔离了，那就是Docker方式。但是目前体验到的Docker最强大的地方还是环境隔离。在开发效率上的提升其实并没有什么直接的促进作用。</p>
<p>为了提高开发效率，还是要进行IDE的扩展和强化。因此，从这两点上来说，如果能够在Pycharm上熟练使用Docker的相关功能，就能够实现轻量级的环境和优雅高效的开发方式。</p>
<h2 id="痛点定义"><a href="#痛点定义" class="headerlink" title="痛点定义"></a>痛点定义</h2><p>在日常的工作中，由于开发人员多采用windows和mac系统进行开发，而服务侧则通常使用linux系统进行部署。在通用性满足前提的情况下，问题不大。但当有一定严苛的开发需求出现时，就存在比较大的困扰了。<br>现在的一个痛点是，需要在本地开发环境对代码进行加密，然后提交到服务器上进行部署，实现源代码的加密部署。由于加密过程中需要打包编译器的相关组件，所以加密后的代码要在相同的系统类型和编译器版本上才能运行。因此在使用Docker隔离的基础上，还需要使用完全一致的开发基础组件。</p>
<h2 id="痛点解决思路"><a href="#痛点解决思路" class="headerlink" title="痛点解决思路"></a>痛点解决思路</h2><p>现阶段服务端部署时通常采用直接部署的方式，未采用docker进行部署，所有直接线上线下采用相同版本的Docker镜像行不通，但是由于加密涉及到的仅仅是操作系统类型，编译器类型和语言包，所以保持这三者一致即可。</p>
<h2 id="实施思路"><a href="#实施思路" class="headerlink" title="实施思路"></a>实施思路</h2><p>上述思路其实比较简单，不过实现细节的探索过程还是比较曲折的。下面介绍下具体的实现细节（mac版）</p>
<ol>
<li><p>安装好Pycharm Professional 版本，普通社区版不具备Docker插件，远程编译和远程部署功能。</p>
</li>
<li><p>安装好Docker，mac这里选择docker for mac进行安装。</p>
</li>
<li><p>启动Docker服务</p>
</li>
<li><p>配置Pycharm连接Docker服务<br> Pycharm-&gt;Perferences-&gt;Build,Execution,Deployment -&gt;Docker</p>
</li>
<li><p>选择右边的+号添加Docker服务，填写好对应的本地和容器内部的映射路径对，apply应用即可。<br><img src="http://note.youdao.com/yws/res/13527/DAE32D6ED0BD45E8A127371415B7FDD0" alt="image"></p>
</li>
<li><p>点击Pycharm的services标签页（点击pycharm最左下角的那个博士帽图标，调出services标签页），如下图所示。<br><img src="http://note.youdao.com/yws/res/13586/CF7F60A179974D6B9C2A42757BF547BE" alt="image"><br><img src="http://note.youdao.com/yws/res/13534/16AA3115F5524DF6917A3D9DC2B0A6AC" alt="image"></p>
</li>
<li><p>右击Docker图标，选择Connect，连接Docker服务，连接成功后，可以看到Docker的管理页，可以看到有具体的容器和镜像。可以对容器和镜像进行相应的增删改查操作。<br><img src="http://note.youdao.com/yws/res/13541/8C1F7B7B0ADF40209A1DDEC362A47707" alt="image"></p>
</li>
<li><p>由于已经下载过对应的Python3.5.4的镜像了，所有这里能够看到，如果想要对应的镜像，可以在下载后再来这里查看。公司线上系统统一的镜像地址请联系运维获取。</p>
</li>
<li><p>这里选择Python3.5.4对应的镜像进行右击，即可进入到容器的配置创建页，默认命名为Docker Image。 设置好容器名称，容器的映射端口，卷映射，和一些执行命令等，即可创建对应的容器了。我这里创建一个名为python_test的容器<br><img src="http://note.youdao.com/yws/res/13547/C5E65C65089B4D71A28823A1B06CF94B" alt="image"></p>
</li>
</ol>
<ol start="10">
<li>创建完成后，点击该容器，即可进行该容器的具体管理页。上图中左边红框是新建的容器，右边红框是该容器的对应配置，可以查看和修改，不过修改都是要重启容器的，不建议在容器创建后进行配置修改。<br><img src="http://note.youdao.com/yws/res/13556/0A7BDDB9F0454C29A4834CFA0D31F93C" alt="image"></li>
</ol>
<ol start="11">
<li><p>当容器按照定义的配置创建好以后，就需要部署了，对的，容器部署，其实就是容器创建时自定义的那个操作，这边部署的时候执行一下，有点惰性执行的味道。</p>
</li>
<li><p>右键容器名进行部署，即可完成容器的部署操作。部署完之后可以进行验证，比如做了代码映射，可以点击Files查看对应的目录有没有映射成功。<br><img src="http://note.youdao.com/yws/res/13568/DA28E45E51ED434E8F52B45F9EB64885" alt="image"></p>
</li>
<li><p>当我们创建好容器，现在就可以进行加密操作了，右击容器名，通过attach进行容器内部，在映射目录中根据requirements.txt安装对应的Python包后，即可运行加密脚本进行加密了。</p>
</li>
<li><p>加密完后，在本地电脑的对应目录中即可看到对应的加密后的文件，此时提交本地修改后，再checkout一份新分支后删除对应的源码即可实现加密提交了。</p>
</li>
</ol>
<p>15.提交完后，停止容器即可。下次再使用时启动容器即可。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>其实，这个方案本质上是使用了Pycharm提供的Docker客户端，然后使用命令行的方式进行代码代码。不过因为有了GUI，所以使用起来可能更加便捷。</p>
<p>当然这是一种最基础的方式，有可以通过使用Docker内的远程编译器和远程部署方案来实现。另外，创建Docker的方式也可以使用Dockerfile和yaml脚本的形式，这里暂时用不上，就留待以后说明。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/18/怎样做好一个技术leader/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="redpoppet">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hub of Poppet">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/18/怎样做好一个技术leader/" itemprop="url">怎样做好一个技术leader</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-18T16:31:42+08:00">
                2019-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Project-Management/" itemprop="url" rel="index">
                    <span itemprop="name">Project Management</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://img.hacpai.com/bing/20190617.jpg?imageView2/1/w/960/h/520/interlace/1/q/100" alt> </p>
<h2 id="一、-做好项目实施关键路径"><a href="#一、-做好项目实施关键路径" class="headerlink" title="一、  做好项目实施关键路径"></a>一、  做好项目实施关键路径</h2><p>什么叫项目的关键路径，归根到底就是一句话，就是做项目的套路。就是项目从头到尾，要做哪些关键事项。</p>
<p>这一点其实是一个靠经验吃饭的地方，做的项目多，套路自然就熟了。拿到项目的关键里程碑，其实就可以做出项目实时关键路径了，但是这个和项目主计划又有所不同，这个关键路径是不带时间属性的。因此，平时应该和别人就这一点仔细交流。</p>
<h2 id="二、-做好项目计划"><a href="#二、-做好项目计划" class="headerlink" title="二、 做好项目计划"></a>二、 做好项目计划</h2><p>凡事预则立，不预则废的道理大家都懂。但是就是有很多项目不注重这件事情，对项目没有整体的规划，永远都集中在本周或下周计划上，根本不关心或者不能确定未来一段时间的工作路径，导致项目组靠天吃饭，进度完全没有任何约束力，整个项目也体会不到一丝丝的结束现象。</p>
<h4 id="2-1：做好项目计划"><a href="#2-1：做好项目计划" class="headerlink" title="2.1：做好项目计划"></a>2.1：做好项目计划</h4><p>为了照顾远期规划和近期目标，项目辅导这边推荐三级计划，由不同层级的人员制定和维护。</p>
<p><img src="http://192.168.16.237:8100/solo/upload/728bc44449ae4594931ed3cadd257e77_a.png" alt="apng"> </p>
<p>项目主计划更新动机来源于客户需求，来源于组内调整，来自于产品要求，项目经理要及时更新项目主计划，让开发人员能够心里有个底，可以提前暴露风险。</p>
<p>技术leader分配的当周任务，是技术leader和项目经理根据项目主计划推进要求拆分出来的，用于细化阶段任务。</p>
<p>开发人员自我拆解的每日事项是根据技术leader分配的周任务进行自我任务拆解和工时评估。</p>
<h4 id="2-2：开好早会"><a href="#2-2：开好早会" class="headerlink" title="2.2：开好早会"></a>2.2：开好早会</h4><p>早会的重要性再怎么强调也不为过，早会的主要目的主要分为以下四个：</p>
<ul>
<li>昨天任务确认</li>
<li>今日任务明确</li>
<li>问题方案沟通</li>
<li>追踪事项收集</li>
</ul>
<h2 id="三、做好开发流程把控"><a href="#三、做好开发流程把控" class="headerlink" title="三、做好开发流程把控"></a>三、做好开发流程把控</h2><ul>
<li><p>做好环境准备和维护工作，好的开发工具和开发流程带来的效率提升是你根本想象不到的。</p>
</li>
<li><p>做好开发流程宣贯和监督并以身作则，尤其是项目开始初期。</p>
</li>
<li><p>明确每个开发人员的工作起点和工作终点，关注任务衔接点的不彻底和不沟通现象。</p>
</li>
<li><p>形成稳定的周任务开闭节奏，尽量做到以周为单位做到稳定迭代。</p>
</li>
</ul>
<h2 id="四、做好风险把控"><a href="#四、做好风险把控" class="headerlink" title="四、做好风险把控"></a>四、做好风险把控</h2><p>做好计划并按期完成并不能保证项目能够按期结束，能够把握项目的外溢任务风险才是王道。风险把控能力其实可以粗略地分为风险预判能力和错误处理能力。<br>风险预判能力其实来自于对项目的信息收集能力，因此风险预判能力其实等价于信息发现和关注能力之和。鉴于此，基于早会事项沟通时记录下每个不确定的事项就显得尤为重要。</p>
<p>另一块错误处理能力也很重要，技术leader平时要关注项目中的所有版块，只有这样，当项目出现技术层面问题时，才能够快速判断错误可能来自于哪端，可能什么问题，不要太过于局限自己。</p>
<p>这两项能力素材和能力都来自于长年累月地积累，绝不可能一蹴而就的。</p>
<h2 id="五、做好项目沟通"><a href="#五、做好项目沟通" class="headerlink" title="五、做好项目沟通"></a>五、做好项目沟通</h2><p>项目的团队工作主要分为以下两方面：</p>
<h4 id="1：做好团队内部沟通工作"><a href="#1：做好团队内部沟通工作" class="headerlink" title="1：做好团队内部沟通工作"></a>1：做好团队内部沟通工作</h4><ul>
<li>传达好工作依赖关系，对工作衔接点进行把关</li>
<li>打造平等的沟通环境，要引领群组沟通，减少一对一沟通。</li>
<li>要及时主动地同步项目的相关变化给所有人</li>
</ul>
<h4 id="2：做好团队外部沟通工作"><a href="#2：做好团队外部沟通工作" class="headerlink" title="2：做好团队外部沟通工作"></a>2：做好团队外部沟通工作</h4><ul>
<li>和组长做好技术难题沟通工作</li>
<li>和各组长做好工作质量检查和提升工作</li>
<li>和各组长做好各端任务拆解与工时评估关键过程的理解</li>
</ul>
<h2 id="六、做好技术管理"><a href="#六、做好技术管理" class="headerlink" title="六、做好技术管理"></a>六、做好技术管理</h2><h4 id="1：把握开发节奏"><a href="#1：把握开发节奏" class="headerlink" title="1：把握开发节奏"></a>1：把握开发节奏</h4><p>按照开发，冒烟，提测，预发，投产流程驱动开发节奏，关注岗位分工和配合。只有稳定的开发节奏才能带来稳定的产出。把控好冲刺和放松力度。</p>
<h4 id="2：做好团队技术氛围"><a href="#2：做好团队技术氛围" class="headerlink" title="2：做好团队技术氛围"></a>2：做好团队技术氛围</h4><p>自己对技术要有追求，没有人喜欢做重复的事情,对于项目中的重难点要及时让组员学习和探索，要鼓励组员尝试新工具新思想。</p>
<h4 id="3：做好环境资源缺口评估"><a href="#3：做好环境资源缺口评估" class="headerlink" title="3：做好环境资源缺口评估"></a>3：做好环境资源缺口评估</h4><p>开发资源缺口评估和技术方案制定，外部资源申请等工作。</p>
<h4 id="4：做好技术治理工作"><a href="#4：做好技术治理工作" class="headerlink" title="4：做好技术治理工作"></a>4：做好技术治理工作</h4><p>对质量不佳，错误频出的工作内容要加以重视，及时寻求外部资源介入。对于不合理的工作方式要及时调整和宣贯。</p>
<h4 id="5：做好技术容忍工作"><a href="#5：做好技术容忍工作" class="headerlink" title="5：做好技术容忍工作"></a>5：做好技术容忍工作</h4><p>对于不确定或无法预知的工作内容，要尽快进入试错阶段，进行提前验证，不要在那里意淫，讨论与设想，都是无用功。</p>
<h2 id="七、带上勇气和激情"><a href="#七、带上勇气和激情" class="headerlink" title="七、带上勇气和激情"></a>七、带上勇气和激情</h2><p>如果前面的你都不具备也不要气馁。因为不会的可以学，不知道的可以问。但是不敢做和不愿做才是无可救药。当你感觉到不舒服就对了，因为舒服是留给死人的。<br>技术，经验和性格都可以成为一个人的优势，但绝对不是能够带领团队走向辉煌的要素，勇气和激情才是。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/Python运行环境分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="redpoppet">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hub of Poppet">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/Python运行环境分析/" itemprop="url">Python运行环境分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:31:42+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Technical-Innovation/" itemprop="url" rel="index">
                    <span itemprop="name">Technical Innovation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Python运行环境分析"><a href="#Python运行环境分析" class="headerlink" title="Python运行环境分析"></a>Python运行环境分析</h1><ol>
<li><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>Python 作为一门非常强悍的语言，目前在多个领域内发展的如火如荼。Python的发展离不开其庞大的第三方库。因为各种原因，我们可能或在多个场景下使用不同的Python及其第三方包。为了实现隔离和权限，Python需要在不同的环境下运行，因此，本文想来分析下Python在各个场景下的运行环境设置。</p>
</li>
<li><h2 id="Python运行的三种环境"><a href="#Python运行的三种环境" class="headerlink" title="Python运行的三种环境"></a>Python运行的三种环境</h2><ol>
<li><h3 id="全局运行环境"><a href="#全局运行环境" class="headerlink" title="全局运行环境"></a>全局运行环境</h3><p>这种场景一版都是使用在生产部署的时候，直接使用系统安装的Python及其第三方包。</p>
<p>此种场景下的操作步骤如下：</p>
<p>​    1：采用root用户在opt目录下下载一个Python3或者Python2的二进制包。</p>
<p>​    2：通过在系统环境变量PATH里面设置Python和pip的查找路径，每个pip都对应一个Python</p>
<p>​    3：使用上一步配置好的pip来为Python安装全局第三方包。</p>
</li>
<li><h3 id="用户运行环境"><a href="#用户运行环境" class="headerlink" title="用户运行环境"></a>用户运行环境</h3><ol>
<li><p>用户运行环境分两种情况，一种是采用root账户已经安装好全局Python编译器，可以直接使用，另一种是连Python编译器都需要安装。第二种情况和全局运行环境类似，只不过使用的用户不同而已。这里主要说的是第一种。</p>
</li>
<li><p>基于全局Python解释器的非root权限安装第三方包</p>
<p>此时，系统中已经存在Python解释器，只是缺少第三方包，如果第三方包已经安装完毕，则也可以直接使用，不存在权限问题。假设当前用户不具备sudo权限，通过全局pip是没有权限安装Python第三方包的。此时可以将第三方包安装在个人目录下，具体命令为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> pip  <span class="comment"># 查看pip执行文件位置</span></span><br><span class="line">$ pip -V <span class="comment"># 看成此pip对应的Python编译器，通过pip安装的第三方包，会安装到这个Python编译器上</span></span><br><span class="line">$ pip install --user pandas -i https://pypi.douban.com/simple <span class="comment"># 安装pandas第三方库到当前用户下</span></span><br></pre></td></tr></table></figure>
<p>通过上面操作安装的Python第三方包并不会出现在系统的第三方包目录，而是会在当前用户的家目录下面的.local目录下。.local目录为隐藏目录，默认使用用户身份安装第三方包时，会自动创建。此时当前用户能调用的模块包含系统Python第三方目录下的模块和当前用户.local目录下的模块。</p>
<p>注意，此种场景下，并没有重新安装Python解释器，仅仅将某些第三方包安装在有权限的用户目录下了。</p>
</li>
</ol>
</li>
<li><h3 id="基于虚拟环境的Python运行环境"><a href="#基于虚拟环境的Python运行环境" class="headerlink" title="基于虚拟环境的Python运行环境"></a>基于虚拟环境的Python运行环境</h3><p>这种场景是隔离度最高的方式，不会影响其他人的操作。</p>
<p>基于虚拟环境的Python运行环境使用的其实是副本的概念，就是将某个Python环境复刻一份供你一个人使用。此时复刻的包括Python编译器和第三方包(继承)。每个人都可以复刻一份专属于自己的虚拟环境来进行开发，如果系统中有多个Python，可以选择不同的Python环境来进行复刻。</p>
<p>创建Python的虚拟环境的工具有很多，推荐使用virtualenv+virtualenvwrapper, virtualenvwrapper是virtualenv的扩展包，命令更加简单。</p>
</li>
</ol>
</li>
<li><h2 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h2><p>在项目开发中，经常发现有小伙伴因为不熟悉这三种场景，导致经常出现各种问题，例如，通过pip安装成功了pandas，但是却发现无法引入；系统中有多个pip和多个python，不知道使用哪个。</p>
<p>针对此类问题，只需要找到pip和其对应的Python编译器，即可成功实现使用不同路径下的pip为对应的Python编译器安装第三方包。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/To_B_项目实施方法论/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="redpoppet">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hub of Poppet">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/To_B_项目实施方法论/" itemprop="url">在览众，项目居然是这么做的！！！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:31:42+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Project-Management/" itemprop="url" rel="index">
                    <span itemprop="name">Project Management</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://img.hacpai.com/bing/20180209.jpg?imageView2/1/w/960/h/520/interlace/1/q/100" alt> </p>
<p>在国际滨的物联网街上，有这么一家公司，名字叫览众数据，端的是NB绝顶。</p>
<p>这家公司由创始人带着国外先进的供应链知识回到国内，邀请星巴克，百度，汉得的众多大佬级人物加盟，通过攻克服装，零售，医药流通等行业的头部客户，打造了极具标杆效应的行业案例，一时风头无两，独孤求败。</p>
<p>那么览众到底是如何搞定太平鸟，李宁，拉夏贝尔，九州通，凯蓝这些看起来遥不可及的目标呢？让我们来一探究竟。</p>
<p>通过仔(Dao)细(Chu)调(Da)研(Ting),归(si)纳(chu)总(gui)结(tian)等途径，终于打探到览众完成这些顶级案例的多种高难度姿势。</p>
<p>览众目前主要通过推行项目制来践行对客户的承诺，为客户提供市面上找不到的服务，听起来就觉得很NB。<br>那么一连串的问题来了，客户信息从哪里来？有了客户信息，谁么去给客户洗脑，签订合同呢？签订合同后，又需要哪些人去启动项目呢？启动项目以后，又怎么来完成项目，用实际结果征服客户呢？</p>
<p>不要急，慢慢来，今天就给大家一一脑补，毕竟装逼最在意的就是会当凌绝顶，一览众山小这种意境对不？</p>
<p>首先第一个问题，客户信息哪里来？ 是不是通过AI搞什么电话销售机器人一天天的骚扰客户，通过身体和心理的双重摧残来逼迫客户就范? 瞎几把扯，虽然览众数据是一家专业AI公司，但是这种不人道的手段，我们是坚决反对的。</p>
<p>要想找到客户，那肯定是去市场上找啊。市场？ 菜市场还是四季青服装市场？这个是大妈的选择，作为一家高逼格的供应链行业服务公司，自然要采用最璀璨的通道，例如参加行业协会并赞助一个ppt报告的时间或重资举办一场交流沙龙，隆重登场，然后让览众的耀眼光芒刺破目标客户心中的雾霾，主动归附到览众这个山头下才是王道啊。<br>客户信息（金主爸爸的名片）拿到以后，出面的就是销售了，于泡澡捏脚和推杯换盏中推心置腹，顺手拿出A4纸(合同)，盖个章就齐活了。是不是感觉很简单？嘿嘿，你懂的。</p>
<p>当征服客户的肉体需求后，如果客户还是千呼万唤始出来，犹抱琵琶半遮面，<br>就需要祭出览众营销中心的另外一张王牌，去给予客户精神方面的满足感。<br>售前顾问会用一个创意与灵感齐飞，专业共激情一体的行业解决方案震慑客户那弱小的心灵，让他们体验一种山外山，楼外楼的意境，历史的车轮会告诉客户，要么选择览众，要么被时代淘汰。</p>
<p>当金主爸爸甩出成吨的万紫千红一片绿，就进入了览众最重要的日常操作了。<br>项目中心的项目经理接过销售和售前的接力棒，伙同开发中心的小伙伴一起就可以开始一段新的征程了。且让我为各位看官娓娓道来。</p>
<p>当项目经理拿到项目合同后，和大boss们进行一番郑重的承诺，就可以寻找开发中心的小伙伴了。项目经理发出他的召集令，召集前端工程师,后端工程师，建模工程师，算法工程师，运维工程师，测试工程师，UI设计师，大数据工程师，组成浩浩荡荡的大军，去接受金主爸爸们的检验。</p>
<p>但是因为览众从事的行业太过高端，需要每个岗位具有极高的专业度，所以我们需要从业务专精，技术专精两个方面去让客户开开眼界，项目经理在业务方面可以碾压一线商品运营人员，技术方面可以和客户五五开，但是为了形成对客户心理上的绝对高压态势和日常支配习惯，我们必须在业务和技术两个方向上都占据战略制高点，所以我们为此推出了览众项目实施中的另外一个高端岗位，TL （team leader)，俗称技术leader。</p>
<p>技术leader通过把握技术发展方向，提高项目组技术专精度，以便让项目经理腾出足够的时间去和客户一线人员撕逼，让他们意识到自己的不足，百尺竿头更近一步。</p>
<p>作为一名技术人员，我对技术leader这个岗位特别进行了一番研究，好看下自己是不是被时代所抛弃，看下这个岗位到底在做些什么，有没有什么卵用？</p>
<p>岗位名称：技术leader</p>
<p>选取方式：组长推荐，撕逼，CTO拍板。</p>
<p>合作对象：项目经理，产品经理，产品技术leader</p>
<p>跟随的小伙伴：前端工程师,后端工程师，建模工程师，算法工程师，运维工程师，测试工程师，UI设计师，大数据工程师，数据分析师</p>
<p>可临时借用的外部免费劳动力：开发，研发各端小组长</p>
<p>岗位宗旨：彰显实力，让技术成为优势，而非短板。</p>
<p>岗位职责：</p>
<pre><code>1，参与业务与技术调研
2，参与需求评审
3，参与详细计划评审
4，Git以及SVN申请
5，申请redmine帐号给客户，用于反馈需求与问题
6，参与开发任务拆解
7，通过redmine监控项目开发任务进度
8，主持技术每天站会
9，主持codereview
10，冒烟测试与提测
11，开发技术问题反馈与解决
12，辅助项目经理进行开发团队管理
13，负责与客户IT对接
14，负责整合、输出各端技术文档
</code></pre><p>看起来，14条，一个工作任务非常丰满的岗位，有挑战我喜欢（MMP，老子心里其实是拒绝的）。</p>
<p>不对，毛主席说过，城市夺取政权行不通，换个套路，走农村包围城市的路子重新分析一下这个岗位。<br>    咦，这个岗位好像有很多人需要对接，按照对接人分个类看下。</p>
<pre><code>客户IT对接类：
    1：参与业务与技术调研
    2：申请redmine帐号给客户，用于反馈需求与问题
    3：负责与客户IT对接

内部IT对接类：
    1：Git以及SVN申请，服务器相关事宜沟通。

技术人员对接类：
    1：主持需求评审，方案评审，排期评审
    2：审核开发人员的任务拆解与工时评估
    2：主持技术每天站会，把控开发进度，时不时再review一下代码，
    3：把开发人员写的代码集中部署一下，搞个冒烟测试与提交给测试。
    4：记录，解决，反馈下开发技术问题，整合各端开发人员文档。

项目经理对接类：
    1：督促项目经理及时提供签字蓝图，签字需求变更，项目里程碑计划。
    2：督促项目经理掏钱请吃饭。
</code></pre><p>哈哈哈，14条职责变成4类，搞定客户IT，搞定内部IT，搞定开发小伙伴，搞定项目经理，感觉突然就清晰简单了很多，我真TM聪明。要不要再考虑换个姿势思考下？<br>刚才从人的角度分析了一下，那现在就从做事的类别上划分一下吧。</p>
<pre><code>1：技术管理类：
    1：技术调研准备
    1：参与需求，方案，排期评审
    2：开发人员代码冒烟和提测
    3：技术问题解决，记录，整合各端文档，review代码

2：进度管理类
    1：主持站会，把控开发进度
    2：督促项目经理及时提供签字蓝图，签字需求变更，项目里程碑计划

3：服务管理类：
    1：参与业务与技术调研
    2：Git以及SVN申请，服务器相关事宜沟通。
    3：申请redmine帐号给客户，用于反馈需求与问题
    4：负责与客户IT对接
</code></pre><p>嘿嘿嘿，搞定技术管理，进度管理，服务管理三类就好了，真是不识庐山真面目，横看成岭侧成峰啊。</p>
<p>好了，从宏观层面上给大家脑补了一下技术leader的岗位职责，是不是感觉有点雄赳赳气昂昂，可以去跨越鸭绿江（扛起技术leader的大旗）了，反正也就just so so嘛，哥们智商高达250，这点小事还做不好？总结一句话，技术leader嘛，从对接人分类来说，就是对接好客户IT，对接内部IT，对接开发人员，对接项目经理，从事项分类上就是做好技术管理，进度管理，服务管理三大类嘛。技术leader要做的第一件事情就是。。。。，就是。。。。，卧槽，空有万卷书，却无下手处啊。这么多事情，先做哪个好啊？谁能教我一招庖丁解牛？普及下项目中的经络（事项依赖管理，任务进行时序）啊，算了还是不耻下问，去让组长整理一份项目实施路线图吧，省的他老让我干活，礼尚往来嘛，传统还是不能抛弃的。<br>经过一番威逼利诱，终于拿到了刚出锅的项目实施checklist，先露个脸。</p>
<p><img src="http://192.168.16.237:8100/solo/upload/b1152fc7630c47919b92096c0b55e96e_image.png" alt="imagepng"> </p>
<p>项目checklist整体分为以下几个阶段：</p>
<pre><code>1：调研阶段
    1.调研前准备
    2.系统调研，数据调研
    3.服务器准备，安装，测试

2：蓝图设计阶段和模型初版阶段
    1：蓝图设计与签字
    2：搞定edw层数据
    3：初版模型跑通，模型输出格式确认。

3：系统设计与开发
    1：前端，后端，算法，测试，调度各端设计
    2：各端开发，冒烟与提测
    3：站会与需求变更管理。

4：系统上线
    1：生产环境准备
    2：上线方案确认
    3：线上告警机制，运行效率提升
    4：备份，回滚，容错方案设计与确认

5：客户试用：
    1：模型迭代
    2: 集成业务系统 

6：系统验收
    1：验收方案
    2：验收对接人
    3：客户培训
    4：运维文档整理
</code></pre><p>NB，不愧是组长出品，年龄大就是经验足啊，下次可以再多压榨他们一下。完成的checklist放在附件里，点赞后，可以自由下载查阅哈。</p>
<p>任务项搞定了，任务项的时序关系搞定了，接下来按部就班，按章执行就好了。不过嘛，人天生就具有一定的惰性，为了保证自我意识的紧张感和风险的预见，还是需要找个人来旁观一下。为此CTO亲自指派了组长天团来进行内部协调。</p>
<pre><code>Garrett，负责和CXO沟通，解决项目组内部无法解决的问题。
Viking, 负责对POC和试点进行实施细节指导。
Tommy, 负责对生鲜类和医药类进行实施细节指导。
Poppet, 负责对服装类项目进行实施细节指导。
</code></pre><p>有了任务项，有了任务时序，还有了教练员，看样子，技术leader要起飞了，欧耶，fighting ！！！技术leader们，躁动起来，错了也没关系，反正还年轻。</p>
<p>终于把览众项目实施的内容阐述完了，先来一瓶年轻就要醒着拼！！！</p>
<p>小伙伴们，现在是否对览众的项目实施方法论有了更深刻的理解呢？如果有不明白的，欢迎骚扰各组长，获取最新的项目checklist，或移步邮箱网盘下载，有需要也可以申请一对一的针对性辅导，免费的哦。</p>
<p><a href="http://192.168.16.237:8100/solo/upload/50431900e2da4f508a2be27104918d1a_checklist.xlsx" target="_blank" rel="noopener">项目checklist.xlsx</a> </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/模型调度那些事/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="redpoppet">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hub of Poppet">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/模型调度那些事/" itemprop="url">模型调度那些事儿</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:31:42+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Technical-Innovation/" itemprop="url" rel="index">
                    <span itemprop="name">Technical Innovation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="关于模型调度的那些事儿"><a href="#关于模型调度的那些事儿" class="headerlink" title="关于模型调度的那些事儿"></a>关于模型调度的那些事儿</h1><h2 id="模型调度"><a href="#模型调度" class="headerlink" title="模型调度"></a>模型调度</h2><p>目前公司采用airflow作为调度平台，调度中目前分为数仓任务调度、模型任务调度和后端任务调度。为了提高大家对任务调度的理解，这里对模型的调度工作做下详细说明。</p>
<p>模型整体的调度从顺序上可以分为串行调度或并行调度或混合调度。画个图解释一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A--&gt;B</span><br><span class="line">B--&gt;C</span><br><span class="line">C--&gt;D</span><br><span class="line">A--&gt;E</span><br><span class="line">E--&gt;F</span><br><span class="line">F--&gt;D</span><br></pre></td></tr></table></figure>
<center>混合调度图</center><br><br><br><br>从资源占用上可以分为单机调度或多机调度。<br>画个图解释一下：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">id((client)) --ssh command--&gt; worker_A</span><br><span class="line">id((client)) --ssh command--&gt; worker_B</span><br><span class="line">id((client)) --ssh command--&gt; worker_C</span><br></pre></td></tr></table></figure><br><br><center>多机调度图</center>


<h2 id="模型备份与回滚"><a href="#模型备份与回滚" class="headerlink" title="模型备份与回滚"></a>模型备份与回滚</h2><h3 id="模型调度备份"><a href="#模型调度备份" class="headerlink" title="模型调度备份"></a>模型调度备份</h3><p>为了确保模型的稳定性，针对模型需要设置备选调度路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">id((model_ra)) --1:if success--&gt; next_task</span><br><span class="line">id((model_ra)) --2: retry--&gt; id((model_ra))</span><br><span class="line">id((model_ra)) --3:if fail--&gt; model_ra_bak</span><br><span class="line">model_ra_bak --4:if fail--&gt; email</span><br><span class="line">model_ra_bak --4:if success--&gt; next_task</span><br></pre></td></tr></table></figure>
<center>模型调度备份路径图</center>



<p><br></p>
<h3 id="模型线上回滚"><a href="#模型线上回滚" class="headerlink" title="模型线上回滚"></a>模型线上回滚</h3><p>当最近两个版本的模型均不能正常工作，可以联系运维，申请线上版本回退。</p>
<p>目前，线上运维备份机制主要是通过软链接的形式进行更新与备份，可以通过更改软连接的指向地址来回滚线上版本。举个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">subgraph bak  </span><br><span class="line">model_ra_0811 --- model_ra_0812</span><br><span class="line">model_ra_0812 --- model_ra_0813</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">subgraph product</span><br><span class="line">model_ra --&gt; model_ra_0813</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<center>正常状态</center><br><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph BT</span><br><span class="line">subgraph bak  </span><br><span class="line">model_ra_0811 --- model_ra_0812</span><br><span class="line">model_ra_0812 --- model_ra_0813</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">subgraph product</span><br><span class="line">model_ra --&gt; model_ra_0811</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure><br><br><center>回滚后状态</center>


<h3 id="模型表备份"><a href="#模型表备份" class="headerlink" title="模型表备份"></a>模型表备份</h3><p>模型通常都是以输出结果表的形式来和数仓任务进行交互。初始交互方式如下图所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">subgraph model_task  </span><br><span class="line">model_ra --&gt; mod_sku_replenish</span><br><span class="line">model_ra --&gt; mod_sku_allot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">subgraph warehouse_task</span><br><span class="line">mod_sku_replenish --&gt; DM_task</span><br><span class="line">mod_sku_allot --&gt; DM_task</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<center>模型表备份方案1</center><br><br><br>经过一段时间的实践，发现上图中的交互方式存在以下问题：<br>1. 模型创建的表，数仓无权限读取和写入<br>1. 模型无法重试，无法重复写库，模型写入的数据不能直接覆盖，要有留存。<br>1. 数仓需要对模型输出表做些转换。<br>1. 可能会存在误删情况，因为建模测试表非常多<br>1. 无法处理多品牌的写库问题，无法同时看到两份数据<br><br><br>为了解决以上问题，总结出以下方案：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">subgraph model_task  </span><br><span class="line">model_ra --&gt; mod_sku_replenish_current</span><br><span class="line">model_ra --&gt; mod_sku_allot_current</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">subgraph warehouse_task</span><br><span class="line">mod_sku_replenish_current --&gt; mod_sku_replenish</span><br><span class="line">mod_sku_allot_current --&gt; mod_sku_allot</span><br><span class="line">mod_sku_replenish --&gt; DM_tasks</span><br><span class="line">mod_sku_allot --&gt; DM_tasks</span><br><span class="line">end</span><br></pre></td></tr></table></figure><br><br><center>模型表备份方案2</center>

<p>另外，如果采用分区表的形式去做模型表备份，仍然存在两个问题：<br>1：模型的输出是不确定性的，经常需要删除重建<br>2：数据分析师在线上进行模型输出单据快速验证时，需要在不覆盖凌晨的自动调度生成的表的前提下进行输出补调单<br>3：模型和建模同时操作一张表，极易导致表的数据损坏和误删除。</p>
<h2 id="模型测试调度线"><a href="#模型测试调度线" class="headerlink" title="模型测试调度线"></a>模型测试调度线</h2><p>为了对模型的效果进行快速验证，数据分析师或者项目经理需要基于最新的数据生成补调单据，进行模型结果分析。</p>
<p>为了不影响生产环境中的调度，算法组总结出了模型测试调度线机制，专门用来进行模型的测试验证。这里提一下，模型测试调度线，并不是只能测试一个模型，可以包含多个模型。</p>
<p>测试调度线的使用流程如下：</p>
<ul>
<li>建模本地测试通过，项目经理和建模初步确认结果，例如总调拨量，总捕获量等。</li>
<li>建模提交代码给算法，由算法测试通过后，上传至模型测试调度线的模型代码目录，并修改相应参数(如写测试表等)，交由数据分析师或者项目经理进行调度。</li>
<li>模型测试通过后，即可执行整个测试调度脚本，当执行完后续的数仓处理存储过程和导出存储过程，即可通过邮件将导出的单据直接发送到数据分析师或者项目经理邮箱。</li>
<li>项目经理和数据分析师可以基于收到的单据和数据库中的模型结果表进行详细分析，输出模型效果评价。</li>
<li>项目经理确定是否更新线上模型。</li>
</ul>
<h4 id="模型测试调度线的示意图如下图所示："><a href="#模型测试调度线的示意图如下图所示：" class="headerlink" title="模型测试调度线的示意图如下图所示："></a>模型测试调度线的示意图如下图所示：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">id(start) --&gt; model_ra</span><br><span class="line">model_ra --&gt; dm_task</span><br><span class="line">dm_task --&gt; rst_task</span><br><span class="line">rst_task --&gt; generate_documents</span><br><span class="line">generate_documents --&gt; email_documents</span><br><span class="line">email_documents --&gt; success_email</span><br></pre></td></tr></table></figure>
<center>模型测试调度线</center>
























          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">redpoppet</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">redpoppet</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
